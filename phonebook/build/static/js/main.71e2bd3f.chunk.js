(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(1),a=t(14),r=t.n(a),i=t(3),u=function(e){var n=e.filter,t=e.handleFilterChange;return Object(o.jsxs)("div",{children:["filter shown with",Object(o.jsx)("input",{onChange:t,value:n})]})},s=function(e){var n=e.name,t=e.number,c=e.handleSave,a=e.handleNameChange,r=e.handleNumberChange;return Object(o.jsxs)("form",{onSubmit:c,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{onChange:a,value:n})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{onChange:r,value:t})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{children:"add"})})]})},l=function(e){var n=e.person,t=e.deletePerson;return Object(o.jsxs)("div",{children:[n.name," ",n.number," ",Object(o.jsx)("button",{onClick:function(e){t(n)},children:"Delete"})]},n.name)},d=function(e){var n=e.filteredPersons,t=e.deletePerson;return Object(o.jsx)("div",{children:n.map((function(e){return Object(o.jsx)(l,{person:e,deletePerson:t},e.id)}))})},h=t(4),j=t.n(h),b="/api/persons",f=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var n=e.message;return null===n||""===n?null:Object(o.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.message;return null===n||""===n?null:Object(o.jsx)("div",{className:"error",children:n})},x=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),l=Object(i.a)(r,2),h=l[0],j=l[1],b=Object(c.useState)(""),x=Object(i.a)(b,2),w=x[0],C=x[1],k=Object(c.useState)(""),S=Object(i.a)(k,2),P=S[0],N=S[1],y=Object(c.useState)(""),D=Object(i.a)(y,2),E=D[0],F=D[1],I=Object(c.useState)(""),J=Object(i.a)(I,2),L=J[0],T=J[1];Object(c.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),a(e)}))}),[]);var A=P.length>0?t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})):t;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(g,{message:E}),Object(o.jsx)(p,{message:L}),Object(o.jsx)(u,{handleFilterChange:function(e){N(e.target.value)},filter:P}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(s,{name:h,number:w,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){C(e.target.value)},handleSave:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h}));n&&n.number!==w?window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))&&(n.number=w,O(n.id,n).then((function(e){F("Person '".concat(e.name,"' has a new number")),setTimeout((function(){F(null)}),5e3),f().then((function(e){console.log("promise fulfilled"),a(e),j(""),C("")}))})).catch((function(e){T("Information of ".concat(n.name," has already been removed from the server"))}))):n?alert("".concat(h," is already added to phonebook")):m({id:h,name:h,number:w}).then((function(e){F("Added '".concat(e.name,"' to phone book")),setTimeout((function(){F(null)}),5e3),console.log(e),a(t.concat(e)),j(""),C("")}))}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(d,{filteredPersons:A,deletePerson:function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&(console.log("Going to delete person",e.name),v(e.id).then((function(){return f().then((function(e){console.log("promise fulfilled"),a(e)}))})))}})]})};t(38);r.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.71e2bd3f.chunk.js.map